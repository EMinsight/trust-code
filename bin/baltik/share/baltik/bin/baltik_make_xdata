#!/bin/bash
mkdir -p build/xdata
cd build/xdata
dest=`pwd`
cd -
org=$TRUST_ROOT/Outils/TRIOXDATA/
cp -ar $org/XTriou $dest 
ln -sf  $org/EditData $org/VerifData $org/check_jdd $org/XDATA*    $org/Installer $org/Install_all  $org/Makefile $dest
mkdir -p $dest/test_complet
ln -sf $org/test_complet/fait_lance_test $org/test_complet/modif $dest/test_complet
mkdir -p $dest/TRIOU
cp -ar $org/TRIOU/TRIOU_SRC $dest/TRIOU
mv  $dest/XTriou/TRAD_2  $dest/XTriou/TRAD_2.org
chmod +w  $dest/XTriou/TRAD_2.org
cp share/doc_src/* $dest/XTriou
cat  $dest/XTriou/TRAD_2.org $dest/XTriou/TRAD2_ajout > $dest/XTriou/TRAD_2

cd $dest
(cd XTriou;[ -f build_TRAD2.sh ] && ./build_TRAD2.sh )
make
cd $project_directory
mkdir -p share/doc_src
cat build/xdata/XTriou/Keywords.txt $TRUST_ROOT/doc/TRUST/Keywords.txt | sort | uniq -u > share/doc_src/Keywords.txt.n
KeywordsTRUST=`$TRUST_Awk '!/\|/ {k=k" "$1} /\|/ {gsub("\\\|"," ",$0);k=k" "$0} END {print k}' share/doc_src/Keywords.txt.n`
echo "syntax keyword TRUSTLanguageKeywords$KeywordsTRUST" >> share/doc_src/Keywords.Vim
