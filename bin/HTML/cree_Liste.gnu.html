#!/bin/bash
# Affiche les listes des fichiers .gnu disponibles pour chaque sonde :
# $1 numero de la fenetre :
NUM=$1
ETUDE_TRUST=`QUELLE_ETUDE.ihm`
export ETUDE_TRUST
NOMETUDE=`echo $ETUDE_TRUST | $TRUST_Awk '{n=split($0,a,"/");print a[n]}'`
NOMCAS=`cat $ETUDE_TRUST/.NOM_DATA`
cd $ETUDE_TRUST
fichier=$ETUDE_TRUST/.courbe$1.gnu.html
# Ecriture du fichier :
echo "<!--NewPage-->
<html>
<head>
<title>ETUDE $NOMETUDE </title>
</head>
<body>
<BODY BGCOLOR="#C5D5D5" TEXT="#23238E" LINK="#E47833" ALINK="#007FFF" VLINK="#007FFF">
<a href=$TRUST_ROOT/doc/TRUST.html>TRUST </a> | <a href=$ETUDE_TRUST/.Liste.son.html>Retour</a><br>
<PRE>
<HR><h1>Superposition de courbes :</h1><HR>
<h2>Courbe de base</h2>" > $fichier
# Lecture du nom du cas:
export NOM=`cat $ETUDE_TRUST/.NOM_DATA`
REP=$TRUST_ROOT/../Doc_TRUST/IHM
# Affichage de la barre de menu de la courbe :
cat gnuplot/$NOM.menu | grep "$NUM-" | $TRUST_Awk -v ETUDE=$ETUDE_TRUST -v REP=$REP -v html=$fichier -v lpnb=${#IMPRESSION} -v lpcou=${#IMPRESSION_COLOR} '{i++;image=REP"/"$2".gif";image1=REP"/"$2"1.gif";image2=REP"/lpnb.gif";image3=REP"/lpcou.gif";
com="";for (j=2;j<NF+1;j++) com=com" "$j;
im="<a href="REP"/ordre"i".IHM><img src="image" ></a> ";
im=im"<a href="REP"/ordre-"i".IHM><img src="image1" ></a> ";
if (lpnb!=0) im=im"<a href="REP"/ordrei"i".IHM><img src="image2" ></a> ";
if (lpcou!=0) im=im"<a href="REP"/ordreI"i".IHM><img src="image3" ></a> ";
print $1" "com"\n"im"<HR>" >> html}'
#<FORM METHOD="Rechercher" ACTION="$TRUST_ROOT/../Doc_TRUST/IHM/ordreplus$NUM.IHM"> <input type="submit" value="Rechercher"> Rechercher des courbes dans un repertoire <a href="$fichier">Mise a jour</a></FORM>



