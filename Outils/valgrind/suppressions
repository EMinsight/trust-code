# Triggered by 
#   VAHL_DAVIS_VEFPreP1B_impl
#   PETSC_Quasi_Comp_Coupl_keps_VEF_impl_GMRES
#   ThHyd_keps_VEF_impl
#   PETSC_Canal_VEF_2D_LongMelangeThHyd_keps_VEF_impl 
#   Couplage_Implicite_Instationnaire_jdd1
#
{
   <hypre_set_up_factor>
   Memcheck:Cond
   fun:MPIC_Waitall
   fun:MPIR_Alltoall_intra
   fun:MPIR_Alltoall
   fun:MPIR_Alltoall_impl
   fun:PMPI_Alltoall
   fun:hypre_SetUpFactor
   fun:hypre_SetUpLUFactor
   fun:HYPRE_DistributedMatrixPilutSolverSetup
   fun:HYPRE_ParCSRPilutSetup
   fun:PCSetUp_HYPRE
   fun:PCSetUp
   fun:KSPSetUp
   ...
}

# Triggered by?? (not sure anymore?)
{
   <hypre_set_up_factor2>
   Memcheck:Cond
   fun:MPIC_Waitall
   fun:MPIR_Alltoall_intra
   fun:MPIR_Alltoall
   fun:MPIR_Alltoall_impl
   fun:PMPI_Alltoall
   fun:MatrixComplete
   fun:hypre_ParaSailsSetup
   fun:HYPRE_ParaSailsSetup
   fun:PCSetUp_HYPRE
   fun:PCSetUp
   fun:KSPSetUp
   ...
}

# Triggered by PETSC_GCP_SPAI_P0P1Pa
{
   <hypre_set_up_factor3>
   Memcheck:Cond
   fun:MPIC_Waitall
   fun:MPIR_Alltoall_intra
   fun:MPIR_Alltoall
   fun:MPIR_Alltoall_impl
   fun:PMPI_Alltoall
   fun:MatrixComplete
   fun:convert_matrix
   fun:hypre_ParaSailsSetup
   fun:HYPRE_ParaSailsSetup
   fun:PCSetUp_HYPRE
   fun:PCSetUp
   fun:KSPSetUp
   ...
}

# Triggered by 3D_P0P1Pa_perio
{
   <MUMPS_para0>
   Memcheck:Cond
   fun:dmumps_solve_driver_
   fun:dmumps_
   fun:dmumps_f77_
   fun:dmumps_c
   fun:MatSolve_MUMPS
   fun:MatSolve
   fun:PCApply_Cholesky
   fun:PCApply
   fun:KSPSolve_PREONLY
   fun:KSPSolve
   ...
}

# Triggered by OpDiffP1B_mixte_vitesse_implicite_3D
{
   <MUMPS_para1>
   Memcheck:Cond
   fun:dmumps_solve_driver_
   fun:dmumps_
   fun:dmumps_f77_
   fun:dmumps_c
   fun:MatSolve_MUMPS
   fun:MatSolve
   fun:PCApply_LU
   fun:PCApply
   fun:KSPSolve_PREONLY
   fun:KSPSolve
   ...
}

# Triggered by PAR_3D_P0P1Pa for example:
# Error type: User: Uninitialised byte(s) found during client check request
{
   <MUMPS_para2>
   Memcheck:User
   fun:check_mem_is_defined_untyped
   fun:walk_type_array
   fun:check_mem_is_defined
   fun:PMPI_Pack
   fun:MPI_PACK
   fun:__dmumps_comm_buffer_MOD_dmumps_buf_send_1int
   fun:dmumps_mcast2_
   fun:dmumps_sol_r_
   fun:dmumps_sol_c_
   fun:dmumps_solve_driver_
   fun:dmumps_
   fun:dmumps_f77_
   fun:dmumps_c
   fun:MatSolve_MUMPS
   ...
}

# Triggered by 
#   PAR_Collecteur
#   PAR_P1toP0P1Pa, 
#   PAR_Test_solveur_sym
#   PAR_DarcyFlow_jdd3
#   PAR_DarcyFlow_jdd4
#   ...
{
   <MUMPS_Cholesky>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   fun:Cblacs_pinfo
   fun:blacs_gridmap_
   fun:blacs_gridinit_
   fun:dmumps_init_root_ana_
   fun:dmumps_ana_driver_
   fun:dmumps_
   fun:dmumps_f77_
   fun:dmumps_c
   fun:MatCholeskyFactorSymbolic_MUMPS
   fun:MatCholeskyFactorSymbolic
   fun:PCSetUp_Cholesky
   fun:PCSetUp
   fun:KSPSetUp
   ...
}

# On some hosts/OS dl_init is leaking!!!
# Typically happens with libstdc++.so.6.XXX (e.g. on FED22 with g++5.1.1), 'upwind' case
{
   <dl_init>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   obj:/usr/lib64/libstdc++.so.6.*
   fun:call_init.part.*
   fun:_dl_init
   obj:/usr/lib64/ld-*.so
   ...
}

# Similar as above - Triggered by upwind 
#    is229106 en Mint 18.1 Serena - g++ 5.4.0 - MPICH 3.2
#    is226426 en Ubuntu 16.04 - g++ 5.4.0 - MPICH 3.2
{
   <dl_init2>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   obj:/usr/lib/x86_64-linux-gnu/libstdc++.so.6.*
   fun:call_init.part.0
   fun:call_init
   fun:_dl_init
   obj:/lib/x86_64-linux-gnu/ld-2.*.so
   ...
}

# Triggered by upwind -- is223196 en CentOS 6.4 - g++ 6.3.0 - MPICH 3.2
{
   <free_gpp630>
   Memcheck:Free
   fun:free
   fun:free_mem
   fun:__libc_freeres
   fun:_vgnU_freeres
   fun:exit
   ...
}

##
## OpenMPI related suppressions ...
##

# upwind - is223279 en Fedora 18 - g++ 4.7.2 - OpenMPI 2.0.2
{
   <ompi_2_0_2__0>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   fun:hnp_component_open
   fun:mca_base_framework_components_open
   fun:mca_base_framework_open
   fun:orte_init
   fun:ompi_mpi_init
   fun:PMPI_Init_thread
   fun:PetscInitialize.part.3
   ...
}
{
   <ompi_2_0_2__1>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   fun:strdup
   fun:opal_argv_append_nosize
   fun:opal_argv_append
   fun:opal_argv_split_inter
   fun:dlopen_component_register
   fun:mca_base_framework_components_register
   fun:mca_base_framework_register
   fun:mca_base_framework_open
   fun:mca_base_component_repository_init
   fun:mca_base_open
   fun:opal_init_util
   fun:ompi_mpi_init
   fun:PMPI_Init_thread
   fun:PetscInitialize.part.*
   ...
}

# upwind -- is225222 en Fedora 18 - g++ 4.7.2 - OpenMPI 2.1.1
{
   <ompi_2_1_1__0>
   Memcheck:Cond
   fun:opal_value_unload
   fun:rte_init
   fun:orte_init
   fun:ompi_mpi_init
   fun:PMPI_Init
   ...
}
{
   <ompi_2_1_1__1>
   Memcheck:Cond
   fun:opal_value_unload
   fun:ompi_proc_complete_init
   fun:ompi_mpi_init
   fun:PMPI_Init
   ...
}
{
   <ompi_2_1_1__2>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   fun:strdup
   fun:opal_argv_append_nosize
   fun:opal_argv_append
   fun:opal_argv_split_inter
   fun:dlopen_component_register
   fun:mca_base_framework_components_register
   fun:mca_base_framework_register
   fun:mca_base_framework_open
   fun:mca_base_component_repository_init
   fun:mca_base_open
   fun:opal_init_util
   fun:ompi_mpi_init
   fun:PMPI_Init
   ...
}

# is147462 en Fedora 22 - g++ 5.1.1 - OpenMPI 2.0.2
{
   <ompi_2_0_2__2>
   Memcheck:Leak
   match-leak-kinds: reachable
   fun:malloc
   fun:hnp_component_open
   fun:mca_base_framework_components_open
   fun:mca_base_framework_open
   fun:orte_init
   fun:ompi_mpi_init
   fun:PMPI_Init_thread
   fun:PetscInitialize.part.*
   ...
}

