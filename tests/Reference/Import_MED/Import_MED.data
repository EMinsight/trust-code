# differents tests de lecture de champ MED #
# PARALLEL OK #
dimension 2

# lecture du champ par le temps #
champ_Fonc_med ch
Read ch cInit_tDiffu.med Face concentrationInitialeC1 elem  0.
# lecture du champ par numero de pas de temps (ici 1 ) #
champ_Fonc_med ch2
Read ch2 cInit_tDiffu.med Face concentrationInitialeC1 elem  -1

domaine dom
domaine dom2
# BEGIN MESH #
Lire_Med dom Face rectangle_a1.med
Read_file dom_ssz.geo ;
Reordonner dom 
Lire_Med dom2 Face rectangle_a1.med
Reordonner dom2 
# END MESH #
# BEGIN PARTITION
Partition dom 
{
	Partitionneur Tranche { tranches 1 3 }
	Larg_joint 1
	Nom_Zones DOM
}
End 
END PARTITION #

# BEGIN SCATTER  
Scatter DOM.Zones dom 
Scatter DOM.Zones dom2
Read_file ssz_par.geo2 ;
END SCATTER #
Pb_conduction pb_test_sous_zone
Pb_conduction pb_champ_med_interpole
Probleme_couple pbc
VDF dis

Scheme_euler_explicit sch
Read sch
{
        tinit 0
	dt_min 0.1
	dt_max 0.1
	nb_pas_dt_max 1
}
Solide sol_test_sous_zone
Read sol_test_sous_zone
{
        rho Champ_Uniforme 1 2
        lambda Champ_Uniforme 1 0.01
        Cp Champ_Uniforme 1 0.5
}
Solide sol_champ_med_interpole
Read sol_champ_med_interpole
{
        rho Champ_Uniforme 1 2
        lambda Champ_Uniforme 1 0.01
        Cp Champ_Uniforme 1 0.5
}
Associate pb_test_sous_zone dom
Associate pb_test_sous_zone sol_test_sous_zone
Associate pbc  pb_test_sous_zone


Associate pb_champ_med_interpole dom2
Associate pb_champ_med_interpole sol_champ_med_interpole


Associate pbc pb_champ_med_interpole
Associate pbc sch


Discretize pbc dis

Read pb_test_sous_zone
{
    Conduction
        {
                diffusion { negligeable }
                conditions_initiales {
                        temperature Champ_Uniforme_Morceaux dom 1 { defaut -1 centre 1.  }
                        }
                boundary_conditions {
                        FAM_-4_GAUCHE  paroi_adiabatique
         		FAM_-5_HAUT  paroi_adiabatique
                        FAM_-6_DROIT  paroi_adiabatique
                        FAM_-7_BAS  paroi_adiabatique
                }
        }
	 Postraitement
        {
                Sondes
                {
                        sonde temperature periode 5. points 1 0.45 0.45
                }
                Champs dt_post 30.
                {
                        temperature elem
                 }
        }
}
Read pb_champ_med_interpole
{
    Conduction
        {
                diffusion { negligeable }
                conditions_initiales {
                        temperature   Champ_Fonc_MED last_time cInit_tDiffu.med Face concentrationInitialeC1 elem  1000.
                        }
                boundary_conditions {
                        FAM_-4_GAUCHE  paroi_adiabatique
         		FAM_-5_HAUT  paroi_adiabatique
                        FAM_-6_DROIT  paroi_adiabatique
                        FAM_-7_BAS  paroi_adiabatique
                }
        }
	 Postraitement
        {
                Sondes
                {
                        sonde2 temperature periode 5. points 1 0.45 0.45
                }
		format lata
                Champs dt_post 30.
                {
                        temperature elem
                 }
        }
}

Solve pbc

End

