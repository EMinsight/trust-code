**************
TRUST scripts
**************

To run the TRUST tools, TRUST environment must be initialized.

To initialize the TRUST environment :
cd TRUST
source ./env/env_TRUST.sh


**********************
data set support :
**********************

Notice first that the reference manual which contains the information needed to carry out 
a data set is User_Manual_TRUST.pdf (located in $TRUST_ROOT/doc/TRUST)


-EditData : to support user when carrying out a data set by indicating keywords specific to each object
	    located in $TRUST_ROUT/Outils/TRIOXDATA
	    
	syntax : EditData jdd
 
 
-cherche.ksh : to identify all the data sets from the no regression data base 
	       which contain some sepcified keywords (word1 word2...wordn)
	       located in $TRUST_ROOT/bin/KSH
	
	syntax : cherche.ksh word1 word2 ...wordn
		the identified data set are listed in the file 'liste_cherche'
		
	remarks : Use the @ character to replace blank between two words
		  Use the * character to look for incomplete words	
		  
		  
-make_PAR.data : to generate data sets used for sequential calculation - cutting domain - parallel calculation.
		 located in $TRUST_ROOT/bin/KSH
	
	syntax : make_PAR.data jdd 
		-creates SEQ_jdd.data : used to perform sequential calculation
		-creates DEC_jdd.data : used to carry out domain cutting
		(moreover the cript uses DEC_jdd data set to create the .Zones files)
		-creates PAR_jdd.data : used to perform parallel calculation
		
		
	remarks : the jdd (data set) must be previously prepared with the following markers
		  (see a data set from the no regression data base as an example)
		  
		  # BEGIN MESH #
		  ...
		  # END MESH #
		  # BEGIN PARTITION
		  ...
		  END PARTITION #
		  # BEGIN READ
		  ...
		  END READ #
		  
		  
		  
***********************
to run a calculation
***********************

-trust : to perform a calculation
	 located in $TRUST_ROOT/bin
	 
	syntax : trust jdd [ 1>jdd.out 2>jdd.err ] for sequential calculation
		 identical to : $exec jdd [ 1>jdd.out 2>jdd.err ]
		 
	 	 trust PAR_jdd nb_procs [ 1>par_jdd.out 2>par_jdd.err ]
		 identical to : mpirun -np nb_procs $exec PAR_jdd nb_procs [ 1>par.out 2>par.err ]
		 		 	 
		 
-lance_test : to run a case from the no regression data base and compare the results to the reference ones.
	      located in $TRUST_ROOT/bin

	syntax : echo jdd | lance_test [ executable ]	
	
	remark : -echo 0 | lance_test to apply lance_test to all the no regression cases
		  echo liste | lance_test to apply lance_test to the cases listed in the liste file
		  
		 -the reporting file (.tests_TRUST_mpi[_opt]) of the comparison with the reference results is 
		  located in /work/user/.tmp_TRUST_name_view/tests

-Run_fiche : to run a validation case
       located in $TRUST_ROOT/Validation/Outils/Genere_Courbe
       
       syntax : Run validation_file.prm
       a rapport.pdf file is created in $TRUST_ROOT/Validation/Rapports_automatiques/Validant/.../.../build		 
		 
		 		 
******************************
to create or convert meshing
******************************

-Xprepro : to generate structured meshing (or only model which may be used to crate unstructured 
	   meshing with other tool-see Salome)
	   located in $TRUST_ROOT/bin
	   
	   syntax : Xprepro
	   
	   	    an elementary sequence is a follows :
		    -select default button->select OK in the opened window
		    -fill up the fortran file (to specify the size of the domain)
		    -fill up the view list
		    -select the Modelling run button
		    -select Pre mesh visualization button->plot pseudo-color ivar
		    -select Pre-processing run button
		    -select Get geom button 
		    a meshing file (.geom) and a support file (.mesh) are created and copied in the study

The manual Manuel_Xprepro_1.4.pdf is located in $TRUST_ROOT/doc/TRUST
		    
 
******************************
to post-process some fields
******************************

-Run_sonde : to post_process probes (and eventually run the calculation) 
	     located in $TRUST_ROOT/bin
	     
	syntax : Run_sonde [ path_exec/exec ] 
	
	If executable file is specified it is necessary to specify the study and eventually the data set.
	In that case the calculation is started and the post-processing tool is opened. If no executable
	file is specified only the post-processing tool is activated.
		-select the directory which contains the probes files ("." for current directory)
		-select a number N to post-process the probe wich is associated to this number
		-select -N to close the probe
		-select # sign to close the Run_sonde post-processing tool 
		
	remarks : -number N=0 is dedicated to visualization of the convergence criteria
		  -in the case of a segment probe the vizualisation corresponds to the 
		  last post-processed time
		  -&n : scale the plot n
		  -nF : animate the plot profile n
		  -A: to rename result files  
		  
-extrait_coupe : to extract a segment probe at a specific time
		 located in $TRUST_ROOT/bin
		 
	syntax : extrait_coupe jdd PROBE_NAME time 	
		 a jdd_PROBE_NAME.coupe.time file is created	   
		 
	remark : PROBE_NAME corresponds to the name given to the probe in the data set (jdd)
		 and caps must be used to indicate this name when using extrait_coupe tool 
		 
