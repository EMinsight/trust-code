<!--NewPage-->
<html>
<head>
<title>Trio Unitaire </title>
</head>
<body>
<BODY BGCOLOR=#C5D5D5 TEXT=#23238E LINK=#E47833 ALINK=#007FFF VLINK=#007FFF>
<a href=TRUST.html>TRUST</a> | <a HREF=mailto:triou@cea.fr>Assistance</a>
<PRE>

<HR><h1>Problemes recents de portabilite sur la version 1.3.3 de TRUST</h1><HR>

05/08/02 /bin/sh (Version DEC, Linux)
-------------------------------------

Sur DEC, avec /bin/sh:

export A=B ne marche pas... Faire:
A=B && export A

Sur Linux, echo "1,$ s?...?...?g\nw" | ed ne marche pas avec /bin/sh

Remplacer par sed -e "s?...?...?g" 

<HR><h1>Problemes recents de portabilite sur la version 1.2.1 de TRUST</h1><HR>

08/08/00 OpDifKEpsBasReVDFElvr.cpp (Version IBM avec xlC)
---------------------------------------------------------
"OpDifKEpsBasReVDFElvr.cpp", line 118.53: 1540-055: (S) "const Champ_Fonc" cannot be converted to "const DoubleVect&".

const DoubleVect& alpha_t = diffusivite_turbulente();
Remplace par :
const DoubleVect& alpha_t = diffusivite_turbulente().valeurs();
    
08/08/00 VDFdiscr.cpp (Version IBM avec xlC)
--------------------------------------------
VDFdiscr.cpp -DNO_PVM_ -DRS6000 -D_INLINE_EVALUATEURS_ -DNDEBUG
"VDFdiscr.cpp", line 372.57: 1540-055: (S) "Champ_Don" cannot be converted to "const Champ_base&".
"VDFdiscr.cpp", line 372.57: 1540-306: (I) The previous message applies to argument 1 of function "Champ_base::affecter(const Champ_base&)".

(ref_cast(Champ_Fonc_P0_VDF,rho.valeur())).affecter(ch_tmp);
Modifie par :
(ref_cast(Champ_Fonc_P0_VDF,rho.valeur())).affecter(ch_tmp.valeur());

08/08/00 Turb_Fluctu_Temp_W.cpp (Version IBM avec xlC)
------------------------------------------------------
Turb_Fluctu_Temp_W.cpp -DNO_PVM_ -DRS6000 -D_INLINE_EVALUATEURS_ -DNDEBUG
"Turb_Fluctu_Temp_W.cpp", line 231.39: 1540-055: (S) "refTransport_Fluctuation_Temperature_W" cannot be converted to "Equation_base&".
"Turb_Fluctu_Temp_W.cpp", line 231.39: 1540-306: (I) The previous message applies to argument 1 of function "Schema_Temps_base::faire_un_pas_de_temps_eqn_base(Equation_base&)".

sch1.faire_un_pas_de_temps_eqn_base(eqn_transport_Fluctu_Temp);

Remplace par :

sch1.faire_un_pas_de_temps_eqn_base(eqn_transport_Fluctu_Temp.valeur());


<HR><h1>Problemes recents de portabilite sur la version 1.2 de TRUST</h1><HR>

22/06/00 silo_sdx.c (Version F5000)
-----------------------------------
Ajout de :
#ifdef F300
#include <netinet/in.h>
#endif

22/06/00 silo.c (Version F5000)
-------------------------------
Modification de:
#include <sys/file.h>
En:
#ifndef F300
#include <sys/file.h>
#endif

13/03/00 link (Version HP avec g++)
-----------------------------------
/usr/ccs/bin/ld: Unsatisfied symbols:
   pthread_once (code)
   pthread_setspecific (code)
   pthread_getspecific (code)
   pthread_keycreate (code)

Ajout de -ldce au link dans make.HPPA_g++_opt et make.HPPA_g++
Par contre la version share libs semble planter mechant....

10/03/00 Debog.cpp (Version Sun 5.5 avec g++)
---------------------------------------------
Debog.cpp -DNO_PVM_ -Dsun5 -D_COMPILE_AVEC_GCC_ -D_INLINE_EVALUATEURS_ -DNDEBUG
Debog.cpp: In method `class Entree & Debog::interpreter(class Entree &)':
Debog.cpp:123: ambiguous conversion from `Zone_dis' to `Zone_dis_base'
Debog.cpp:123:   candidate conversions include `Zone_dis_base &' and `const Zone_dis_base &'
Debog.cpp:123: cannot convert type `Zone_dis' to type `Zone_dis_base &'
Debog.cpp:123: cannot initialize `Zone_dis_base &' from `Zone_dis'

Remplacement de:
Zone_dis_base& la_zone_dis=pb.domaine_dis().zone_dis(0);
Par:
Zone_dis_base& la_zone_dis=pb.domaine_dis().zone_dis(0).valeur();


10/03/00 ConvVEFbase.cpp (Version Sun 5.5 avec g++)
---------------------------------------------------
ConvVEFbase.cpp: In method `int Op_Conv_VEF_base::impr(class Sortie &) const':
ConvVEFbase.cpp:147: ambiguous conversion from `Champ_Inc_base' to `DoubleTab'
ConvVEFbase.cpp:147:   candidate conversions include `const DoubleTab &' and `DoubleTab &'
ConvVEFbase.cpp:147: cannot convert type `Champ_Inc_base' to type `const DoubleTab &'
ConvVEFbase.cpp:147: cannot initialize `const DoubleTab &' from `Champ_Inc_base'
ConvVEFbase.cpp:182: confused by earlier errors, bailing out

Correction de:
const DoubleTab& transporte =eqn.inconnue().valeur();
Par:
const DoubleTab& transporte =eqn.inconnue().valeurs();


09/03/00 P_AggloVDF.cpp (Version HP aCC)
----------------------------------------
Error 225: "P_AggloVDF.cpp", line 98 # Ambiguous overloaded function call;
    more than one acceptable function found. Two such functions that matched
    were "long double sqrt(long double)" ["/opt/aCC/include/cmath", line 110]
    and "float sqrt(float)" ["/opt/aCC/include/cmath", line 58].
                         haut = droit+ sqrt(nb_ligne) -1;
                                       ^^^^              
Error 224: "P_AggloVDF.cpp", line 107 # Arguments do not match with any
    function '('.
                         haut =i+sqrt(nb_ligne);
                                 ^^^^^^^^^^^^^^ 
Remplacement de:                                 
haut = droit+ sqrt(nb_ligne) -1;    
haut =i+sqrt(nb_ligne);
Par:
haut = droit+ sqrt((double)nb_ligne) -1;    
haut =i+sqrt((double)nb_ligne);                             

09/03/00 P_MG_base.h (Version IBM avec xlC)
----------------------------------------
"./P_MG_V.h", line 33.9: 1540-293: (I) "P_MG_V::Multigrid_solver_G(const Matrice_Morse_Sym&,const DoubleVect&,DoubleVect&,const double,const int,const int)" hides the pure virtual function "P_MG_base::Multigrid_solver_G(const Matrice_Morse_Sym&,const DoubleVect&,DoubleVect&,double,int,int,const Champ_Inc_base&)".
"./P_MG_V.h", line 33.9: 1540-293: (I) "P_MG_V::Multigrid_solver_G(const Matrice_Morse_Sym&,const DoubleVect&,DoubleVect&,const double,const int,const int)" hides the pure virtual function "P_MG_base::Multigrid_solver_G(const Matrice_Morse_Sym&,const DoubleVect&,DoubleVect&,double,int,int)".
"./P_Solvmg.h", line 32.7: 1540-293: (I) "Solv_P_mg::resoudre_systeme(const Matrice_Base&,const DoubleVect&,DoubleVect&)" hides the virtual function "SolveurSys_base::resoudre_systeme(const Matrice_Base&,const DoubleVect&,DoubleVect&,const Champ_Inc_base&,int)".
"PMG.cpp", line 25.10: 1540-174: (S) An object of abstract class "P_MG_V" cannot be created.

Modification dans P_MG_base.h de :
   virtual entier Multigrid_solver_G(const Matrice_Morse_Sym& ,const DoubleVect&,
            DoubleVect&, double, entier, entier) = 0; 
   virtual entier Multigrid_solver_G(const Matrice_Morse_Sym& ,const DoubleVect&,
            DoubleVect&, double, entier, entier ,const Champ_Inc_base&) = 0;
Par:
   virtual entier Multigrid_solver_G(const Matrice_Morse_Sym& ,const DoubleVect&,
            DoubleVect&, const double, const entier, const entier) = 0; 
   virtual entier Multigrid_solver_G(const Matrice_Morse_Sym& ,const DoubleVect&,
            DoubleVect&, const double, const entier, const entier ,const Champ_Inc_base&) = 0;


09/03/00 Champ_P1.cpp (Version IBM avec g++)
--------------------------------------------
Champ_P1.cpp: In method `class DoubleTab & Champ_P1::valeur_aux_elems(const DoubleTab &, const IntVect &, DoubleTab &) const':
Champ_P1.cpp:256: name lookup of `i' changed for new ANSI `for' scoping
Champ_P1.cpp:250:   using obsolete binding at `i'

Remplacement de:
           for (entier i=0; i< 3; i++) {
Par:
           entier i;
           for (i=0; i< 3; i++) {


09/03/00 N_S.cpp (Version Sun 5.5 avec g++)
-------------------------------------------
N_S.cpp: In method `void Navier_Stokes_std::completer()':
N_S.cpp:182: bad argument 1 for function `void Assembleur::associer_zone_cl_dis_
base(const class Zone_Cl_dis_base &)' (type was class Zone_Cl_dis)
N_S.cpp: In method `void Navier_Stokes_std::discretiser()':
N_S.cpp:322: bad argument 1 for function `void Assembleur::associer_zone_dis_bas
e(const class Zone_dis_base &)' (type was class Zone_dis)

Remplacement de:
assembleur_pression_.associer_zone_cl_dis_base(zone_Cl_dis());
Par:
assembleur_pression_.associer_zone_cl_dis_base(zone_Cl_dis().valeur());
Remplacement:
assembleur_pression_.associer_zone_dis_base(zone_dis());
Par:
assembleur_pression_.associer_zone_dis_base(zone_dis().valeur());


09/03/00 Pb_Couple.cpp (Version Sun 5.5 avec g++)
-------------------------------------------------
Pb_Couple.cpp: In method `void Probleme_Couple::discretiser(const class Discreti
sation_base &)':
Pb_Couple.cpp:462: ambiguous conversion from `Zone_dis' to `Zone_dis_base'
Pb_Couple.cpp:462:   candidate conversions include `Zone_dis_base &' and `const
Zone_dis_base &'
Pb_Couple.cpp:462: cannot convert type `Zone_dis' to type `Zone_dis_base &'
Pb_Couple.cpp:24: in passing argument 1 of `Construit_Raccord_voisin(Zone_dis_ba
se &, Nom, const Zone_dis_base &, Nom)'

Correction de:
Construit_Raccord_voisin(z_j,nom_racc_k,z_j_ap,nom_racc_k_ap);
Par:
Construit_Raccord_voisin(z_j.valeur(),nom_racc_k,z_j_ap.valeur(),nom_racc_k_ap);


09/03/00 Int.h (Version HP aCC)
-------------------------------
Remplacement de :
entier x=0;
return (entier) (sqrt(x));
Par:
entier x=0;
return (entier) (sqrt((double)x));


<HR><h1>Problemes recents de portabilite sur la version 1.1.4 de TRUST</h1><HR>

24/11/99 lib/src/LIBSILO/include/make-targets.in (Version Compaq)
-----------------------------------------------------------------
Deplacement du sleep 1 mal place car sinon compilo trop
rapide et la librairie libsilo.a se construit mal ! 
Place dans le Makefile.in du repertoire silo !
Message recu:
db_unk_open unsatisfied ...


10/11/99 Faces.cpp (Version sun5 CC) 
------------------------------------
Faces.cpp -DNO_PVM_ -Dsun5 -D_INLINE_EVALUATEURS_ -DNDEBUG
"Faces.cpp", line 735: Error: Overloading ambiguity between "EcrPrivee::operator<<(const double&)" and "EcrPrivee::operator<<(const short&)".
1 Error(s) detected.

Remplacement de:
Cerr << type_face_ << " non prevu dans Faces::calculer_centres_gravite" << finl;
Par:
cerr << type_face_ << " non prevu dans Faces::calculer_centres_gravite" << endl;


03/11/99 OpDiffKEps_VDFHyper.cpp (Version sun5 g++, IBM xlC) 
------------------------------------------------------------
OpDiffKEps_VDFHyper.cpp: In method `void Op_Diff_K_Eps_VDF_Hyper::ajouter_NS(class DoubleTab &)':
OpDiffKEps_VDFHyper.cpp:365: bad argument 1 for function `class DoubleVect & DoubleVect::ref(const class DoubleVect &)' (type was class Champ_Don)
OpDiffKEps_VDFHyper.cpp:366: bad argument 1 for function `class DoubleVect & DoubleVect::ref(const class DoubleVect &)' (type was class Champ_Fonc)

Remplacer:
  muL.ref(viscosite_dynamique_.valeur());
  muT.ref(viscosite_turbulente_.valeur());
Par:
  muL.ref(viscosite_dynamique_.valeur().valeurs());
  muT.ref(viscosite_turbulente_.valeur().valeurs());


03/11/99 OpDiffKEps_VDFHyper.h (Version sun5 g++) 
-------------------------------------------------
OpDiffKEps_VDFHyper.h: In method `void Op_Diff_K_Eps_VDF_Hyper::dimensionner(class Matrice_Morse &) const':
In file included from OpDifKEpsCompVDF.cpp:25:
OpDiffKEps_VDFHyper.h:92: bad argument 1 for function `void Op_Hyp_VDF_Elem::dimensionner(const class Zone_VDF_Elem &, const class Zone_Cl_VDF_Elem &, class Matrice_Morse &) const' (type was class refZone_VDF_Elem)

Remplacer :
Op_Hyp_VDF_Elem::dimensionner(la_zone, la_zone_Cl, matrice);

Par:
Op_Hyp_VDF_Elem::dimensionner(la_zone.valeur(), la_zone_Cl.valeur(), matrice);

03/11/99 OpDifTurbCompVDF.cpp (Version sun5 g++) 
------------------------------------------------
int numfa[2*dimension];
Remplace par :
ArrOfInt numfa(2*dimension);

07/10/99 find (Version sun5 g++ et CC) 
--------------------------------------
Le link de TRUST necessite deux librairies supplementaires :
libsocket.a (-lsocket)
libnsl.a (-lnsl)
Generalement placees dans /usr/lib elles sont necessaires depuis le
developpement de l'interface TRUST-Meshtv et le link avec la librairie
libsilo.a
Fichiers modifies:
make.sun5_CC
make.sun5_CC_opt
make.sun5_g++
make.sun5_g++_opt

07/09/99 abs (Version HP aCC)
-----------------------------
La fonction abs(double x) ne retourne pas les bonnes valeurs :
Utilisation de dabs(double x)

<HR><h1>Problemes recents de portabilite sur la version 1.1.3 de TRUST</h1><HR>
09/07/99 find (Version Fujitsu 300 et SGI 5.x)
-----------------------------------------------
La commande "find ." ne marche pas, il faut specifier une action
-exec ou -print
Correction de plusieurs scripts dans $TRUST_ROOT/bin

26/03/99 SouKEpsBasReVDFEl.cpp (Version SunOS 5.5.1 compilateur g++)
--------------------------------------------------------------------
SouKEpsBasReVDFEl.cpp: In method `class DoubleTab & Source_Transport_K_Eps_Bas_Reynolds_anisotherme_VDF_Elem::ajouter(class DoubleTab &)
const':
SouKEpsBasReVDFEl.cpp:193: ambiguous conversion from `Modele_turbulence_scal' to `Modele_turbulence_scal_base'
SouKEpsBasReVDFEl.cpp:193:   candidate conversions include `Modele_turbulence_scal_base &' and `const Modele_turbulence_scal_base &'
SouKEpsBasReVDFEl.cpp:193: cannot convert type `Modele_turbulence_scal' to type `const Modele_turbulence_scal_base &'
SouKEpsBasReVDFEl.cpp:193: cannot initialize `const Modele_turbulence_scal_base &' from `Modele_turbulence_scal'
SouKEpsBasReVDFEl.cpp:194: confused by earlier errors, bailing out

Correction de:
const Modele_turbulence_scal_base& le_modele_scalaire = eq_thermique->modele_turbulence();

Par:
const Modele_turbulence_scal_base& le_modele_scalaire = eq_thermique->modele_turbulence().valeur();

26/03/99 Cond_Lim_Rayo.h (Version SunOS 5.5.1 compilateur g++)
--------------------------------------------------------------
Cond_Lim_Rayo.h: In method `class Modele_Rayonnement_Milieu_Transparent & Cond_Lim_Rayo::modele_rayo()':
In file included from Cond_Lim_Rayo.cpp:8:
Cond_Lim_Rayo.h:42: ambiguous conversion from `refModele_Rayonnement_Milieu_Transparent' to `Modele_Rayonnement_Milieu_Transparent'
Cond_Lim_Rayo.h:42:   candidate conversions include `Modele_Rayonnement_Milieu_Transparent &' and `const Modele_Rayonnement_Milieu_Transparent &'
Cond_Lim_Rayo.h:42: cannot convert type `refModele_Rayonnement_Milieu_Transparent' to type `Modele_Rayonnement_Milieu_Transparent &'

Correction de:
inline Modele_Rayonnement_Milieu_Transparent& Cond_Lim_Rayo::modele_rayo()
{
  return le_modele_rayo;
}
Par :
inline Modele_Rayonnement_Milieu_Transparent& Cond_Lim_Rayo::modele_rayo()
{
  return le_modele_rayo.valeur();
}

<HR><h1>Problemes recents de portabilite sur la version 1.1.2 de TRUST</h1><HR>

28/01/99 Int.h (Version HP-UX 10.20 compilateur aCC)
----------------------------------------------------
Correction de:
return (int) (sqrt(x));
Par:
return (int) ((double)sqrt(x));

27/01/99 Ch_front_contact_VEF.cpp (Version SunOS 5.5.1 compilateur g++)
-----------------------------------------------------------------------
Message:
Ch_front_contact_VEF.cpp: In method `void Champ_front_contact_VEF::mettre_a_jour(double)':
Ch_front_contact_VEF.cpp:139: bad argument 1 for function `void Champ_front_contact_VEF::associer_ch_inc_base(const class Champ_Inc_base &)' (type was class refChamp_Inc_base)
Ch_front_contact_VEF.cpp:162: bad argument 1 for function `void Champ_front_contact_VEF::associer_ch_inc_base(const class Champ_Inc_base &)' (type was class refChamp_Inc_base)
make: Fatal error: Command failed for target `Ch_front_contact_VEF.o'

Corrections: 
La ligne 139:	associer_ch_inc_base(l_inconnue1) ;
Devient:	associer_ch_inc_base(l_inconnue1.valeur()) ;
La ligne 162:	associer_ch_inc_base(l_inconnue2) ;
Devient :	associer_ch_inc_base(l_inconnue2.valeur()) ;
CORRIGE SUR LA VERSION 1.1.2

<HR><h1>Problemes recents de portabilite sur la version 1.1.1 de TRUST</h1><HR>

09/12/98 Hyd_SGE_VDF.cpp (Version Linux i686 compilateur egcs)
--------------------------------------------------------------
Message:Coredump sur les tests VDF avec SGE (Marche3D,VAHL_DAVIS_TSM,stat,...)
Solution provisoire:Recompiler Hyd_SGE_VDF.cpp en -g ou -O
Probleme avec la librairie systeme stdlib.h en compilation optimisee
CORRIGE UNIQUEMENT SUR LES MACHINES bargy.alpes.cea.fr et brevent.alpes.cea.fr

09/12/98 liste.cpp (Version SGI,DEC)
------------------------------------
Probleme:Boucle indefiniment sur certains tests
Solution provisoire:Recompiler liste.cpp en -g
CORRIGE UNIQUEMENT SUR LES MACHINES clovisse.cad.cea.fr+SimulogParis

06/11/98 TRUST_opt,gnuplot (Version PC Linux 686)
--------------------------------------------------
Message:
Memory Fault pendant l'execution depuis l'interface de TRUST_opt ou de gnuplot.
Cela fonctionne si on lance depuis un terminal qui ne vient pas de netscape !

Correction:
Recompiler sur la machine TRUST_opt et changer gnuplot livre par le gnuplot
de la machine.

05/11/98 libmath.so (Version PC Linux 586)
------------------------------------------
Message:
/root/Version1.2a/lib/libmath.so: undefined reference to `saxpy_'
/root/Version1.2a/lib/libmath.so: undefined reference to `dcopy_'
/root/Version1.2a/lib/libmath.so: undefined reference to `isamax_'
/root/Version1.2a/lib/libmath.so: undefined reference to `sdot_'
/root/Version1.2a/lib/libmath.so: undefined reference to `snrm2_'
/root/Version1.2a/lib/libmath.so: undefined reference to `idamax_'

Correction:
Changer le nom de la librairie libmath en libtmath.so dans tous
les .h du repertoire Math car sinon sur Linux libmath.so est confondue
avec une autre librairie.
CORRIGE SUR LA VERSION 1.1.1


02/10/98 ContactVDF.cpp (Version SunOS 5.5.1 compilateur g++)
-------------------------------------------------------------
Message:
ContactVDF.cpp -DNO_PVM_ -Dsun5 -D_COMPILE_AVEC_GCC_ -D_INLINE_EVALUATEURS_ -DNDEBUG
ContactVDF.cpp: In method `void Echange_contact_VDF::mettre_a_jour(double)':
ContactVDF.cpp:70: ambiguous conversion from `Zone_dis' to `Zone_dis_base'
ContactVDF.cpp:70:   candidate conversions include `Zone_dis_base &' and `const Zone_dis_base &'
ContactVDF.cpp:70: cannot convert type `Zone_dis' to type `Zone_dis_base &'
ContactVDF.cpp:70: cannot initialize `Zone_dis_base &' from `Zone_dis'
ContactVDF.cpp:77: confused by earlier errors, bailing out 

Correction: La ligne 70 :
Zone_dis_base& zone_dis1 = zone_Cl_dis().zone_dis();
Devient :
Zone_dis_base& zone_dis1 = zone_Cl_dis().zone_dis().valeur();
CORRIGE SUR LA VERSION 1.1.1

09/09/98 make.HPPA* et MAIN/Makefile(Version HP)
------------------------------------------------
Message:
/usr/lib/dld.sl: Call to mmap() failed - TEXT /home/triou/Version1.2a_HPPA/lib/libzvef.sl
/usr/lib/dld.sl: Permission denied
Correction:
Rajouter -Wl,+s a la variable CppFlags des fichiers make.HPPA* car sinon
l'executable genere contient le chemin de ses shares libs en dur. Mais
attention suppression de CppFlags dans la ligne du MAIN/Makefile car sinon
nombreux unsatisfied symbols a l'execution !
CORRIGE SUR LA VERSION 1.1.1


08/09/98 arch.h (Version HP 10.20 sur machine leda)
---------------------------------------------------
Message: 
CC: "./arch.h", line 75: sorry, not implemented: cannot expand inline function with static buf (2020)
Correction avec sortie de la definition du static :
inline char* pwd()
{
  static char* buf=new char[801];
Devient :
static char* buf;
inline char* pwd()
{
  buf=new char[801];
PROBLEME CORRIGE 

27/08/98 Zone.cpp (Version SunOS 5.5 et Linux avec g++)
-------------------------------------------------------
Message:
Zone.cpp: In method `int Zone::comprimer()':
Zone.cpp:827: ambiguous conversion from `Raccord' to `Frontiere'
Zone.cpp:827:   candidate conversions include `Raccord_base &' and `const Raccord_base &'
Zone.cpp:827: cannot convert type `Raccord' to type `Frontiere &'
Zone.cpp:827: cannot initialize `Frontiere &' from `Raccord'
Zone.cpp:829: confused by earlier errors, bailing out

Correction des lignes :
Frontiere& front=curseur.valeur();
Frontiere& front2=curseur2.list().suivant().valeur();

Par les lignes :
Frontiere& front=curseur->valeur();
Frontiere& front2=curseur2.list().suivant()->valeur();
PROBLEME CORRIGE


26/08/98 Champ_P1NC.cpp (Version SunOS 5.5.1 avec g++)
------------------------------------------------------
Message mis :
Champ_P1NC.cpp: In method `void Champ_P1NC::gradient(class DoubleTab &)':
Champ_P1NC.cpp:125: ambiguous conversion from `Champ_Inc' to `DoubleTab'
Champ_P1NC.cpp:125:   candidate conversions include `const DoubleTab &' and `DoubleTab &'
Champ_P1NC.cpp:125: cannot convert type `Champ_Inc' to type `const DoubleTab &'
Champ_P1NC.cpp:125: cannot initialize `const DoubleTab &' from `Champ_Inc'

Correction:
const DoubleTab& vitesse = equation().inconnue()();
Devient:
const DoubleTab& vitesse = equation().inconnue().valeurs();
PROBLEME CORRIGE


24/08/98 MonoScatter.cpp Scatter.cpp (Version IBM AIX 4.1 avec xlC)
-------------------------------------------------------------------
Message mis :
"Scatter.cpp", line 114.27: 1540-224: (S) Conversion from "Zone" to a reference to a non-const type "Zone&" requires a temporary.
"Scatter.cpp", line 114.27: 1540-306: (I) The previous message applies to argument 1 of function "Domaine::add(Zone&)".
"Scatter.cpp", line 114.27: 1540-224: (S) Conversion from "Zone" to a reference to a non-const type "Zone&" requires a temporary.
"Scatter.cpp", line 114.27: 1540-306: (I) The previous message applies to argument 1 of function "Domaine::add(Zone&)".

Correction apportee a la ligne : 
Zone& ma_zone = dom.add(Zone());
Elle devient :
Zone& ma_zone = dom.add((Zone&)Zone());
CORRIGE DANS 1.1 MAIS PAS 1.2 CAR DOUTE SUR LA VALIDITE EN PARALLELE


19/08/98 Ecr_Fic_Coll.cpp Ecr_Fic_Coll_Bin.cpp Ecr_Fic_Dir.cpp Ecr_Fic_Par.cpp E
cr_Fic_Par_Bin.cpp Lec_Fic_Dir.cpp Lec_Fic_Dis_Bin.cpp (Version PC Linux)
-------------------------------------------------------------------------
Probleme de detection du chemin exact (plantage ou repertoire faux)
Rajouter les 3 lignes suivantes en debut de fichier :
#ifdef linux
#include <unistd.h>
#endif

Et modifier les lignes :
#ifdef _CSH_
Par :
#if defined(_CSH_)||defined(linux)
PROBLEME CORRIGE


19/08/98 MAIN.cpp (Version PC Linux)
------------------------------------
Probleme de detection du chemin exact (plantage ou repertoire faux)
ajouter les 3 lignes suivantes en debut de fichier :
#ifdef linux
#include <unistd.h>
#endif
Modifier le bloc :
   #ifdef MICROSOFT
   char* buf=new char[801];
   int longueur=800;
   pwd=_getcwd(buf, longueur);
   #else
      pwd=getenv("PWD");
   #endif
En un bloc :
   #ifdef MICROSOFT
   char* buf=new char[801];
   int longueur=800;
   pwd=_getcwd(buf, longueur);
   #else
      #if defined(_CSH_)||defined(linux)
         char* buf=new char[801];
         int longueur=800;
         pwd=getcwd(buf, longueur);
      #else
         pwd=getenv("PWD");
      #endif
   #endif
PROBLEME CORRIGE


<HR><h1>Problemes recents de portabilite sur la version 1.1 de TRUST</h1><HR>

06/07/98 Version PC Linux 586
-----------------------------
Des problemes avec le shell d'install monodir et mkmf_
mais le probleme doit exister ailleurs ! Attendre la
fin de l'installation pour un report complet :
if [ -f * ] n'est pas compris.
PROBLEME CORRIGE


07/07/98 (Version Sun 5.5 sur soleil.serma.cea.fr)
--------------------------------------------------
Ne stoppe pas lorsque 1 dans le fichier .stop
Probleme deja rencontre sur une SGI 5.3 (Simulog Grenoble)
PROBLEME NON CORRIGE


07/07/98 (Version Sun 5.5 sur soleil.serma.cea.fr)
--------------------------------------------------
Utiliser un grep dans le shell Run_sonde qui accepte
 l'option -f (Sur Sun /usr/xpg4/bin/grep par ex.)
Plus generalement, faire une variable $Grep dans IHM.env
PROBLEME NON CORRIGE SAUF SUR LES VERSIONS DEJA INSTALLEES


07/07/98 Lec_Pri.cpp (Version Sun 5.5 sur soleil.serma.cea.fr)
------------------------------------------------------------
LecPrivee Cma=cin; devient LecPrivee Cma;
Rajout dans process.cpp de la ligne:
Cma=cin;
Apres la ligne :
Cout=cout;
Enfin, ajouter #include <Lec_Pri.h> en debut de fichier de process.cpp
PROBLEME CORRIGE


07/07/98 Lec_Dif.cpp (Version Sun 5.5 sur soleil.serma.cea.fr)
--------------------------------------------------------------
LecDiffuse Cin=cin; devient LecDiffuse Cin;
Rajout dans process.cpp de la ligne:
Cin=cin;
Apres la ligne :
Cout=cout;
PROBLEME CORRIGE


07/07/98 Ecr_Pri.h (Version Sun 5.5 sur soleil.serma.cea.fr)
------------------------------------------------------------
ostream_withassign::flush(); devient
_IO_ostream_withassign::flush();
PROBLEME CORRIGE


07/07/98 ContactVDF.cpp (Version PC Linux 586)
----------------------------------------------
Zone_dis_base& zone_dis1 = zone_Cl_dis().zone_dis(); devient
Zone_dis_base& zone_dis1 = zone_Cl_dis().zone_dis().valeur();
PROBLEME CORRIGE


07/07/98 Main.cpp (Version Sun 5.5 sur soleil.serma.cea.fr)
-----------------------------------------------------------
PROBLEME CORRIGE
Ajout des lignes suivantes entre les lignes #include <mon_process.h> et void usage() :

#ifdef NO_PVM_
int Process::pvm_mod=0;
int Process::pvm_deb=0;
#endif
#ifdef MPI_
int Process::pvm_mod=0;
int Process::pvm_deb=0;
#endif
#ifndef NO_PVM_
#ifndef MPI_
// ---------------------------------
// Options pour PVM :
int Process::pvm_mod=PvmDataDefault;
//int Process::pvm_mod=PvmDataRaw;

//int Process::pvm_deb=PvmTaskHost;
int Process::pvm_deb=PvmTaskDefault;
// ---------------------------------
#endif
#endif


08/07/98 OpDiftVEFFa.cpp (Version PC Linux 586)
-----------------------------------------------
Ligne 128: Mod_turb_hyd_base -> Mod_turb_hyd
Ligne 131: associer_modele_turbulence(mod_turb); ->
           associer_modele_turbulence(mod_turb.valeur());
PROBLEME CORRIGE


08/07/98 MItVDFFa.h (Version PC Linux 586)
------------------------------------------
Ligne 210: la_zcl->la_cl_de_la_face(fac1-decal);\ devient :
	   la_zcl->la_cl_de_la_face(fac1-decal).valeur();\
Ligne 311: la_zcl->la_cl_de_la_face(fac1-decal);\ devient :
	   la_zcl->la_cl_de_la_face(fac1-decal).valeur();\
PROBLEME CORRIGE


08/07/98 Joints.h (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 46: 
for(int i=0;i<size();i++) 
devient :
int i;
for(i=0;i<size();i++)
PROBLEME CORRIGE


08/07/98 Cascade.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 54: 
for (int i=0 ; i < vide[indg] ; i++)
devient :
int i;
for (i=0 ; i < vide[indg] ; i++)
PROBLEME CORRIGE


08/07/98 ChSszTabTps.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 72: 
for (int i=0; i<nb_val; i++)
devient :
int i;
for (i=0; i<nb_val; i++)
Ligne 81:
for (int i=0; i<nb_val; i++)
Devient :
int i;
for (i=0; i<nb_val; i++)
PROBLEME CORRIGE


08/07/98 Ch_Fonc_Tab.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 47:
for (int i=0; i<nb_val; i++)
devient :
for (i=0; i<nb_val; i++)
La ligne 35 devient :
int nb_comp,i;
PROBLEME CORRIGE


08/07/98 Ch_Tab_Tps.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 36 : 
for (i=0; i<nb_val; i++)
devient :
int i;
for (i=0; i<nb_val; i++)
Ligne 46 :
for (i=0; i<nb_val; i++)
devient :
int i;
for (i=0; i<nb_val; i++)
PROBLEME CORRIGE


08/07/98 Ch_front_tabule.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 40 : 
for (i=0; i<nb_val; i++)
devient :
for (int i=0; i<nb_val; i++)
PROBLEME CORRIGE


08/07/98 Champ_Face2.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 57 : 
for (num_elem=0; num_elem<zone_VDF.nb_elem(); num_elem++)
devient :
for (int num_elem=0; num_elem<zone_VDF.nb_elem(); num_elem++)
PROBLEME CORRIGE


08/07/98 DifVDFFaAxiC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 151 :
for (num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
devient :
for (int num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
PROBLEME CORRIGE


08/07/98 DifVDFFaAxiV.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 147 :
for (num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
devient :
for (int num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
PROBLEME CORRIGE


08/07/98 DiftVDFFaAxC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 220 :
for (num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
devient :
for (int num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
PROBLEME CORRIGE


08/07/98 DiftVDFFaAxV.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 218 :
for (num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
devient :
for (int num_elem=0; num_elem<zvdf.nb_elem(); num_elem++)
PROBLEME CORRIGE


08/07/98 Domaine.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ligne 86 et 122 :
Ajout de int devant nsom
PROBLEME CORRIGE


08/07/98 MacVect.h (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Tout a la fin du fichier, remplacement de:
   for(int i=0;i<sz_tempo;i++)\
par :
   int i;\
   for(i=0;i<sz_tempo;i++)\
PROBLEME CORRIGE


08/07/98 Ecrire_fic_lml.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Lignes 96 et 124:
Ajout de int devant l'indice nsom
PROBLEME CORRIGE

08/07/98 EntHypNSCBC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Lignes 196 et 151 et 161 et 268:
Ajout de int devant l'indice i de boucle
PROBLEME CORRIGE


08/07/98 Euler.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Placement de int en debut de methode void Euler::remplir_etat(int num, DoubleVect& etat) const
Et suppression des (int i= dans les boucles par (i=
PROBLEME CORRIGE


08/07/98 Gaz_Parfait.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Ajout de int i; en debut de la methode void Gaz_Parfait::preparer_calcul()
Et la ligne for (int i=0; i<tab_rho.size(); i++) devient :
for (i=0; i<tab_rho.size(); i++)
PROBLEME CORRIGE

08/07/98 Group.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne for (int i=0; i<nb_ss_grp_; i++)
devient :
int i;
for (i=0; i<nb_ss_grp_; i++)
PROBLEME CORRIGE

08/07/98 HydSGEVDFse.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 248 devient :
for (int k=0; k<3; k++)
PROBLEME CORRIGE

08/07/98 Hyd_SGE_DSGS_VDF.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 628 devient :
for (int elem=0; elem<nb_elem; elem++)
PROBLEME CORRIGE

08/07/98 Hyd_SGE_VDF.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 458 devient :
for (int num_elem=0; num_elem<nb_poly; num_elem++)
PROBLEME CORRIGE

08/07/98 Hyd_SGE_VDF_Axi.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 259 devient :
for (int num_elem=0; num_elem<nb_poly; num_elem++)
PROBLEME CORRIGE

08/07/98 JacEulerGP.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 281 devient :
        int i;
        for (i=1; i<dimension+1; i++)
La ligne 290 devient :
        int i;
        for (i=1; i<dimension+1; i++)
La ligne 299 devient :
        int i;
        for (i=1; i<dimension+1; i++)
PROBLEME CORRIGE

08/07/98 Joint_VF.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 93 devient :
            int l;
            for (l=0 ; l <nb_som_face ; l++)
La ligne 90 devient :
        int k;
        for (k=0 ; k <nb_som_face ; k++)
PROBLEME CORRIGE


08/07/98 Mat_Morse.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 111 devient :
  int k;
  for (k=tab1_[i-1]; k<=tab1_[i]; k++)
PROBLEME CORRIGE

08/07/98 OpDifKEpsVEF.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 224 devient :
for (int n_bord=0; n_bord<zone_VEF.nb_front_Cl(); n_bord++)
PROBLEME CORRIGE

08/07/98 PeChaRegVDFFa.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 79 devient :
for (int num_elem=0; num_elem<nb_poly_ss_zone; num_elem++)
PROBLEME CORRIGE

08/07/98 RecoMuscVDFEl.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 215 devient :
for (int j=1; j<nb_var_cons; j++)
PROBLEME CORRIGE

08/07/98 SoPNRNSCBC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 151 devient :
for (int i=0; i< ncomp; i++)
La ligne 315 devient :
for (int i=0; i< ncomp; i++)
La ligne 168 devient :
for (int i=0; i<ncomp; i++)
PROBLEME CORRIGE


08/07/98 Sonde.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 277 devient :
int i;
for(i=0; i<nbre_points; i++) {
La ligne 370 devient :
int i;
for(i=0; i<nbre_points; i++) {
PROBLEME CORRIGE


08/07/98 SortPNSCBC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 149 devient :
for (int i=0; i< ncomp; i++)
La ligne 166 devient :
for (int i=0; i<ncomp; i++)
La ligne 307 devient :
for (int i=0; i< ncomp; i++)
PROBLEME CORRIGE


08/07/98 SouKEpsVDFEl.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 347 devient :
for (int num_elem=0; num_elem<nb_elem; num_elem++)
PROBLEME CORRIGE


08/07/98 SouKEpsVEFFa.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 191 devient :
for (int n_bord=0; n_bord<zone_VEF.nb_front_Cl(); n_bord++)
La ligne 462 devient :
for (int n_bord=0; n_bord<zone_VEF.nb_front_Cl(); n_bord++)
La ligne 607 devient :
for (int n_bord=0; n_bord<zone_VEF.nb_front_Cl(); n_bord++)
La ligne 933 devient :
for (int n_bord=0; n_bord<zone_VEF.nb_front_Cl(); n_bord++)
PROBLEME CORRIGE

08/07/98 SymHypNSCBC.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 131 devient :
for (int i=0; i< ncomp; i++)
La ligne 175 devient :
for (int i=0; i<dimension; i++)
La ligne 148 devient :
for (int i=0; i<ncomp; i++)
La ligne 202 devient :
for (int i=0; i< ncomp; i++)
La ligne 235 devient :
for (int i=0; i< ncomp; i++)
La ligne 266 devient :
for (int i=0; i< ncomp; i++)
PROBLEME CORRIGE

08/07/98 Tranche.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne: for (int som=0 ; som < graph.nvtxs ; som++) 
devient :
int som;
for (som=0 ; som < graph.nvtxs ; som++)
PROBLEME CORRIGE


08/07/98 ZoneClVefP1.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 186 devient:
for(int i=0; i<nb_cond_lim(); i++)
PROBLEME CORRIGE

08/07/98 ZoneVefP1P1.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 161 devient:
for (int num_elem=0; num_elem<nb_elem; num_elem++) {
PROBLEME CORRIGE

08/07/98 Zones.cpp (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
La ligne 156 devient:
for(int i=0; i<nbjoints;i++){
La ligne 196 devient:
for(int i=0;i<nbjoints;i++){
La ligne 246 devient:
for(int i=0;i<nbjoints;i++){
PROBLEME CORRIGE


10/07/98 DoubleTab.h (Version DEC OSF V4.0 sur metis.serma.cea.fr)
---------------------------------------------------------------
Lignes 314,315 deviennent :
  assert(dimensions_tot_.size_array()==1);
  assert(dimensions_tot_(0)>i);
Lignes 321,322 deviennent :
  assert(dimensions_tot_.size_array()==1);
  assert(dimensions_tot_(0)>i);
Lignes 328,329 deviennent :
  assert(dimensions_tot_.size_array()==1);
  assert(dimensions_tot_(0)>i);
PROBLEME CORRIGE

18/08/98 Solide.cpp Solide.h (Version SGI 6.4 en compilation debug avec assert)
-------------------------------------------------------------------------------
Tous les tests en conduction plantent car probleme de dimensions
des tableaux alpha et lambda. Recuperation de la version 1.7 du
fichier Solide.cpp et de la version 1.5 du fichier Solide.h

Assertion failed: dimensions_tot_.size_array()==2, file /users/meije/portage/Version1.1/Math/DoubleTab.h, line 344
PROBLEME CORRIGE

25/08/98 arch.h (Version IBM AIX 4.1 avec xlC)
----------------------------------------------
Message mis :
ld: 0711-317 ERROR: Undefined symbol: .daxpy_
ld: 0711-317 ERROR: Undefined symbol: .ddot_
ld: 0711-317 ERROR: Undefined symbol: .idamax_
ld: 0711-317 ERROR: Undefined symbol: .dnrm2_
ld: 0711-317 ERROR: Undefined symbol: .dcopy_
ld: 0711-317 ERROR: Undefined symbol: .atmux_
ld: 0711-317 ERROR: Undefined symbol: .amux_
ld: 0711-317 ERROR: Undefined symbol: .amub_
ld: 0711-317 ERROR: Undefined symbol: .pgmres_
ld: 0711-317 ERROR: Undefined symbol: .ilut_
ld: 0711-317 ERROR: Undefined symbol: .amudia_
ld: 0711-317 ERROR: Undefined symbol: .aplb_
ld: 0711-317 ERROR: Undefined symbol: .f77ouvrir_
ld: 0711-317 ERROR: Undefined symbol: .lfcdes_
ld: 0711-317 ERROR: Undefined symbol: .lfcdip_
ld: 0711-317 ERROR: Undefined symbol: .entnom_
ld: 0711-317 ERROR: Undefined symbol: .saxpy_
ld: 0711-317 ERROR: Undefined symbol: .sdot_
ld: 0711-317 ERROR: Undefined symbol: .isamax_
ld: 0711-317 ERROR: Undefined symbol: .snrm2_

Rajouter car C++ sur IBM cree un symbol _ pour les appels en fortran...
#ifdef RS6000
#define F77CALLWITHOUT_
#endif
PROBLEME CORRIGE

19/08/98 Post.cpp (Version PC Linux)
------------------------------------
Remplacer: fichier() << "FIN";
Par: fichier() << "FIN" << finl;
Car sinon probleme de lecture du mot FIN !
PROBLEME CORRIGE

21/08/98 lirecast.cpp (Version Sun 5.5 avec CC)
-----------------------------------------------
"lirecast.cpp", line 114: Error: Overloading ambiguity between "EcrPrivee::opera
tor<<(const double&)" and "EcrPrivee::operator<<(const short&)".

Remplacement de la ligne :
Cerr << NOMM2[8*num] <<"  ";
par :
Cerr << (char*)NOMM2[8*num] <<"  ";
PROBLEME CORRIGE
<HR>
</body>
</html> 
